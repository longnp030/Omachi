(function(t){function e(e){for(var n,o,s=e[0],c=e[1],l=e[2],d=0,h=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&h.push(i[o][0]),i[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(h.length)h.shift()();return a.push.apply(a,l||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],n=!0,s=1;s<r.length;s++){var c=r[s];0!==i[c]&&(n=!1)}n&&(a.splice(e--,1),t=o(o.s=r[0]))}return t}var n={},i={app:0},a=[];function o(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=n,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;a.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";r("85ec")},"098c":function(t,e,r){"use strict";r("9df0")},"0a45":function(t,e,r){},1682:function(t,e,r){},"1fd4":function(t,e,r){"use strict";r("dd97")},2413:function(t,e,r){"use strict";r("f723")},"2f26":function(t,e,r){"use strict";r("eea4")},"37c8":function(t,e,r){"use strict";r("6b1f")},"3cb2":function(t,e,r){"use strict";r("1682")},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},a=[],o={name:"app",components:{},created:function(){this.$router.push("home",(function(){}))}},s=o,c=(r("034f"),r("2877")),l=Object(c["a"])(s,i,a,!1,null,null,null),u=l.exports,d=r("8c4f"),h=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"login-page"}},[r("h1",{attrs:{id:"login-title"}},[t._v("Đăng nhập")]),t.show?r("b-form",{staticClass:"w-50 mt-5 form",on:{submit:t.login,reset:t.reset}},[r("b-form-group",{attrs:{id:"input-group-1",label:"Địa chỉ email:","label-for":"input-1"}},[r("b-form-input",{attrs:{id:"input-1",type:"email",placeholder:"Nhập email của bạn..",required:""},model:{value:t.form.Email,callback:function(e){t.$set(t.form,"Email",e)},expression:"form.Email"}})],1),r("b-form-group",{attrs:{id:"input-group-2",label:"Mật khẩu:","label-for":"input-2"}},[r("b-form-input",{attrs:{id:"input-2",type:"password",placeholder:"Nhập mật khẩu..",required:""},model:{value:t.form.Password,callback:function(e){t.$set(t.form,"Password",e)},expression:"form.Password"}})],1),r("b-form-group",{attrs:{id:"input-group-4"}},[r("b-form-checkbox",{model:{value:t.saveCred,callback:function(e){t.saveCred=e},expression:"saveCred"}},[t._v("Giữ tôi đăng nhập")])],1),r("div",{attrs:{id:"btns"}},[r("b-button",{attrs:{block:"",type:"submit",variant:"primary"}},[t._v("Đăng nhập")]),r("b-button",{attrs:{block:"",type:"reset",variant:"danger"}},[t._v("Nhập lại")]),r("b-button",{attrs:{block:"",variant:"warning"},on:{click:t.register}},[t._v("Đăng ký")])],1)],1):t._e()],1)},m=[],f=r("bc3a"),p=r.n(f),g={name:"Login",data:function(){return{authUrl:"https://localhost:5001/Users/authenticate",saveCred:!1,form:{},show:!0}},mounted:function(){console.log(this.saveCred)},methods:{saveCookie:function(t,e,r){this.$cookies.set("omachi-auth-token",t,r),this.$cookies.set("omachi-user-id",e,r)},login:function(t){var e=this;t.preventDefault(),p.a.post(this.authUrl,JSON.parse(JSON.stringify(this.form))).then((function(t){var r=t.data.JwtToken,n=t.data.Id;console.log(e.saveCred),e.saveCred?e.saveCookie(r,n,-1):e.saveCookie(r,n,0),e.$nextTick((function(){this.$router.push({name:"home",params:{authToken:r,userId:n}})}))})).catch((function(t){console.log(t)}))},register:function(){this.$router.push("register")},reset:function(t){var e=this;t.preventDefault(),this.form={},this.show=!1,this.$nextTick((function(){e.show=!0}))}},watch:{saveCred:function(){console.log("saveCred is set to: ",this.saveCred)}}},v=g,_=(r("2413"),Object(c["a"])(v,h,m,!1,null,"23e6dc57",null)),b=_.exports,k=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"register-page"}},[r("h1",{attrs:{id:"register-title"}},[t._v("Đăng ký")]),r("v-form",{ref:"form",staticClass:"register-form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[r("v-text-field",{attrs:{label:"Email",rules:[t.rules.required,t.rules.email]},model:{value:t.registerModel.Email,callback:function(e){t.$set(t.registerModel,"Email",e)},expression:"registerModel.Email"}}),r("v-text-field",{attrs:{label:"Mật khẩu",rules:[t.rules.required],type:"password"},model:{value:t.confirmPwd,callback:function(e){t.confirmPwd=e},expression:"confirmPwd"}}),r("v-text-field",{attrs:{label:"Xác nhận mật khẩu",rules:[t.rules.required,t.rules.matchPwd],type:"password"},model:{value:t.registerModel.Password,callback:function(e){t.$set(t.registerModel,"Password",e)},expression:"registerModel.Password"}}),r("v-checkbox",{attrs:{color:"red",rules:[function(t){return!!t||"Bạn cần đồng ý để tiếp tục!"}],label:"Tôi đồng ý với điều khoản sử dụng"}}),r("v-checkbox",{attrs:{color:"red",label:"Giữ tôi đăng nhập"},model:{value:t.saveCred,callback:function(e){t.saveCred=e},expression:"saveCred"}}),r("v-btn",{staticClass:"mr-4 w-100 green",attrs:{disabled:!t.valid},on:{click:t.register}},[t._v(" Đăng ký ")])],1)],1)},w=[],y={name:"Register",data:function(){var t=this;return{registerUrl:"https://localhost:5001/Users/register",authUrl:"https://localhost:5001/Users/authenticate",valid:!0,saveCred:!1,registerModel:{},confirmPwd:"",rules:{required:function(t){return!!t||"Trường này là bắt buộc."},email:function(t){var e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(t)||"Địa chỉ email không hợp lệ."},matchPwd:function(e){return e===t.confirmPwd||"Mật khẩu không khớp."}}}},methods:{saveCookie:function(t,e,r){this.$cookies.set("omachi-auth-token",t,r),this.$cookies.set("omachi-user-id",e,r)},register:function(){var t=this;this.$refs.form.validate(),p.a.post(this.registerUrl,JSON.parse(JSON.stringify(this.registerModel))).then((function(){var e={Email:t.registerModel.Email,Password:t.registerModel.Password};p.a.post(t.authUrl,e).then((function(e){var r=e.data.JwtToken,n=e.data.Id;t.saveCred?t.saveCookie(r,n,"7d"):t.saveCookie(r,n,0),t.$nextTick((function(){this.$router.push({name:"home",params:{authToken:r,userId:n,userEmail:e.data.Email}})}))})).catch((function(t){console.log(t)}))})).catch((function(t){console.log(t)}))}}},T=y,x=(r("9b10"),Object(c["a"])(T,k,w,!1,null,"1754f7f6",null)),C=x.exports,I=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"home","data-app":""}},[r("div",{attrs:{id:"nav"}},[r("NavigationPanel",{attrs:{user:t.user,jwtToken:t.jwtToken},on:{logout:t.logout}})],1),r("div",{attrs:{id:"map"}},[r("l-map",{attrs:{zoom:t.zoom,center:t.center},on:{click:t.addMarker}},[r("l-tile-layer",{attrs:{url:t.url,attribution:t.attribution}}),t.curr_loc?r("l-circle-marker",{attrs:{color:"red",fillColor:"red",fillOpacity:.8,radius:8,"lat-lng":[t.curr_loc.latitude,t.curr_loc.longitude]}},[r("l-tooltip",[t._v(" Vị trí hiện tại của bạn ")])],1):t._e(),r("l-control",{attrs:{id:"map-utility-controls"}},[r("v-combobox",{attrs:{id:"poi-filter",items:t.categories,label:"Lọc điểm ưa thích",clearable:"",dense:"","hide-selected":"","persistent-hint":"","small-chips":"",solo:""},on:{input:t.filterCategory},model:{value:t.selected_category,callback:function(e){t.selected_category=e},expression:"selected_category"}}),r("v-btn",{on:{click:function(e){t.showActivities=!t.showActivities}}},[t.showActivities?r("span",[t._v("Ẩn các hoạt động")]):r("span",[t._v("Hiện các hoạt động")])]),r("v-btn",{on:{click:function(e){t.showGrid=!t.showGrid}}},[t.showGrid?r("span",[t._v("Ẩn lưới")]):r("span",[t._v("Hiện lưới")])]),r("v-dialog",{attrs:{persistent:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,i=e.attrs;return[r("v-btn",t._g(t._b({on:{click:function(e){return t.addActivity(!t.add_act_dialog,0)}}},"v-btn",i,!1),n),[t._v(" Thêm hoạt động ")])]}}]),model:{value:t.add_act_dialog,callback:function(e){t.add_act_dialog=e},expression:"add_act_dialog"}},[r("ActivityForm",{attrs:{user_id:t.userId,jwt_token:t.jwtToken,formMode:t.formMode,marker:t.new_marker,editMarkerId:t.editMarkerId},on:{addActivity:t.addActivity}})],1),r("v-dialog",{attrs:{persistent:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,i=e.attrs;return[r("v-btn",t._g(t._b({on:{click:function(e){return t.findTrip(!t.find_trip_dialog)}}},"v-btn",i,!1),n),[t._v(" Tìm chuyến đi ")])]}}]),model:{value:t.find_trip_dialog,callback:function(e){t.find_trip_dialog=e},expression:"find_trip_dialog"}},[r("FindTripForm",{attrs:{user_id:t.userId,jwt_token:t.jwtToken,selected_category:t.selected_category,categories:t.categories,startLat:t.center[0],startLon:t.center[1],poiId:t.destPoiId},on:{findTrip:t.findTrip,filterCategory:t.filterCategory,notifyMatchedTrips:t.notifyMatchedTrips}})],1)],1),t._l(t.markers,(function(e){return r("l-circle-marker",{key:e.Id,attrs:{color:"DarkSlateBlue",fillColor:"DarkSlateBlue",fillOpacity:.8,radius:8,"lat-lng":e.LatLon,visible:t.showActivities},on:{click:function(r){return t.editMarker(!t.add_act_dialog,e.Id)}}},[r("l-tooltip",[t._v(" Tên: "+t._s(e.Name)+" "),r("br"),t._v(" Thời gian bắt đầu: "+t._s(e.StartTime)+" ")])],1)})),r("l-polyline",{attrs:{"lat-lngs":t.polyline.latlons,color:t.polyline.color,visible:t.showActivities}}),t._l(t.poiMarkers,(function(e){return r("l-circle-marker",{key:e.Id,attrs:{color:"green",fillColor:"green",fillOpacity:.8,radius:8,"lat-lng":[e.Lat,e.Lon]}},[t._v(' //@click="chooseTripDest($event, poi.Id)"> '),r("l-tooltip",[t._v(" Tên: "+t._s(e.Name)+" "),r("br"),t._v(" Địa chỉ: "+t._s(e.Address)+" "),r("br"),t._v(" Giờ mở cửa: "+t._s(e.OpenTime)+" "),r("br"),t._v(" Giờ đóng cửa: "+t._s(e.CloseTime)+" "),r("br"),t._v(" Đánh giá: "+t._s(e.Rating)+" "),r("br"),t._v(" Hạng mục: "+t._s(e.Category)+" ")])],1)})),t.chosenPoi?r("l-circle-marker",{attrs:{color:"yellow",fillColor:"yellow",fillOpacity:.8,radius:6,"lat-lng":[t.chosenPoi.Lat,t.chosenPoi.Lon]}}):t._e(),t._l(t.grid,(function(e){return r("l-circle-marker",{key:e.Id+"tl",attrs:{color:"tomato",fillColor:"tomato",fillOpacity:.8,radius:8,visible:t.showGrid,"lat-lng":[e.TopLeftLat,e.TopLeftLon]}},[r("l-tooltip",[t._v(" "+t._s(e.TopLeftLat)+", "+t._s(e.TopLeftLon)+" ")])],1)})),t._l(t.grid,(function(e){return r("l-circle-marker",{key:e.Id+"br",attrs:{color:"tomato",fillColor:"tomato",fillOpacity:.8,radius:8,visible:t.showGrid,"lat-lng":[e.BotRightLat,e.BotRightLon]}},[r("l-tooltip",[t._v(" "+t._s(e.BotRightLat)+", "+t._s(e.BotRightLon)+" ")])],1)}))],2)],1),t.matchedTrips?r("MatchedTripsDialog",{attrs:{jwt_token:t.jwtToken,matchedTrips:t.matchedTrips}}):t._e(),r("ChatDialog",{attrs:{userId:t.userId,jwtToken:t.jwtToken}})],1)},j=[],$=r("1da1"),M=(r("99af"),r("ac1f"),r("5319"),r("a434"),r("96cf"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"chat"},[r("div",{staticClass:"chat__header"},[r("span",{staticClass:"chat__header__greetings"},[t._v(" Cửa sổ trò chuyện ")]),t.minimize?r("b-icon",{staticClass:"minimize-chat-btn",attrs:{icon:"plus"},on:{click:function(e){t.minimize=!t.minimize}}}):r("b-icon",{staticClass:"minimize-chat-btn",attrs:{icon:"dash"},on:{click:function(e){t.minimize=!t.minimize}}})],1),t.minimize?t._e():r("chat-list",{attrs:{msgs:t.messages,userId:t.userId,jwtToken:t.jwtToken}}),t.minimize?t._e():r("chat-form",{attrs:{userId:t.userId,jwtToken:t.jwtToken},on:{submitMessage:t.sendMessage}})],1)}),O=[],S=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{ref:"chat__body",staticClass:"chat__body",attrs:{id:"chat__body"}},t._l(t.msgs,(function(e,n){return r("chat-message",{key:n,attrs:{msg:e,jwtToken:t.jwtToken,prev:[0==n?null:t.msgs[n-1]],userId:t.userId}})})),1)},L=[],N=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.msg.userId===t.userId?r("div",{staticClass:"chat__mymessage",class:[t.isSame?"":"chat__first"]},[r("p",{staticClass:"chat__mymessage__paragraph"},[t._v(t._s(t.msg.message))])]):r("div",{staticClass:"chat__yourmessage",class:[t.isSame?"":"chat__first"]},[r("div",[t.name&&!t.isSame?r("p",{staticClass:"chat__yourmessage__user"},[t._v(" "+t._s(t.name)+" ")]):t._e(),r("div",{staticClass:"chat__yourmessage__p"},[r("p",{staticClass:"chat__yourmessage__paragraph"},[t._v(" "+t._s(t.msg.message)+" ")])])])])])},U=[],A=(r("b0c0"),{props:["msg","prev","userId","jwtToken"],data:function(){return{getUserUrl:"https://localhost:5001/Users/",isSame:!1,name:null}},methods:{isSamePerson:function(t,e){var r;return null!==e&&(null===(r=e[0])||void 0===r?void 0:r.userId)==(null===t||void 0===t?void 0:t.userId)},getUser:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p.a.get(t.getUserUrl+t.msg.userId,{headers:{Authorization:"Bearer ".concat(t.jwtToken)}}).then((function(e){t.name=e.data.Name})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()}},created:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.isSame=t.isSamePerson(t.msg,t.prev);case 1:case"end":return e.stop()}}),e)})))()},mounted:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getUser();case 2:case"end":return e.stop()}}),e)})))()}}),R=A,P=(r("3cb2"),Object(c["a"])(R,N,U,!1,null,"d887fcea",null)),q=P.exports,z={components:{ChatMessage:q},props:["msgs","userId","jwtToken"],watch:{msgs:function(){var t=this.$refs.chat__body;t.scrollTop=t.scrollHeight,console.log(this.msgs)}}},E=z,B=(r("670d"),Object(c["a"])(E,S,L,!1,null,"192246d6",null)),D=B.exports,F=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"form"},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.msg,expression:"msg",modifiers:{trim:!0}}],staticClass:"form__input",attrs:{type:"text",placeholder:"Nhập tin nhắn"},domProps:{value:t.msg},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitMessage(e)},input:function(e){e.target.composing||(t.msg=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),r("div",{staticClass:"form__submit",on:{click:t.submitMessage}},[r("svg",{attrs:{width:"30",height:"30",viewBox:"0 0 68 68",fill:"#CCCCCC",xmlns:"http://www.w3.org/2000/svg"}},[r("g",{attrs:{"clip-path":"url(#clip0_26_10)"}},[r("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M48.0833 19.799C48.619 20.3347 48.806 21.127 48.5665 21.8457L35.8385 60.0294C35.5946 60.7614 34.9513 61.2877 34.1855 61.382C33.4198 61.4763 32.6681 61.1217 32.2539 60.4707L22.593 45.2893L7.41158 35.6285C6.76065 35.2142 6.40604 34.4625 6.50031 33.6968C6.59458 32.931 7.12092 32.2878 7.85287 32.0438L46.0366 19.3159C46.7553 19.0763 47.5476 19.2633 48.0833 19.799ZM26.5903 44.1204L33.3726 54.7782L42.0926 28.6181L26.5903 44.1204ZM39.2642 25.7897L23.7619 41.292L13.1041 34.5097L39.2642 25.7897Z",fill:""}})]),r("defs",[r("clipPath",{attrs:{id:"clip0_26_10"}},[r("rect",{attrs:{width:"48",height:"48",fill:"white",transform:"translate(33.9412) rotate(45)"}})])])])])])},J=[],G={props:["userId","jwtToken"],data:function(){return{msg:"",sendMsgUrl:"https://localhost:5001/Chat/chat"}},methods:{submitMessage:function(){if(this.msg){var t={UserId:this.userId,Message:this.msg};p.a.post(this.sendMsgUrl,JSON.parse(JSON.stringify(t)),{headers:{Authorization:"Bearer ".concat(this.jwtToken)}}).then((function(t){console.log(t)})).catch((function(t){console.log(t)})),this.msg=""}}}},H=G,V=(r("37c8"),Object(c["a"])(H,F,J,!1,null,"702cd8e6",null)),Z=V.exports,K={components:{ChatList:D,ChatForm:Z},props:["userId","jwtToken"],data:function(){return{messages:[],minimize:!0}},created:function(){this.$chatHub.$on("message-received",this.onMessageReceived)},methods:{sendMessage:function(t){this.messages.push(t)},onMessageReceived:function(t){var e=t.userId,r=t.message,n={userId:e,message:r};this.messages.push(n)}}},X=K,Y=(r("2f26"),Object(c["a"])(X,M,O,!1,null,"305c8ce8",null)),Q=Y.exports,W=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.user?r("b-navbar",{attrs:{toggleable:"lg",type:"dark",id:"navbar"}},[r("b-navbar-brand",{attrs:{href:"/home"}},[r("b-icon",{attrs:{icon:"map-fill"}})],1),r("b-navbar-nav",{staticClass:"ml-auto"},[r("b-navbar-brand",{staticClass:"info",on:{click:t.openUserProfile}},[r("b-avatar",{staticClass:"mr-2",attrs:{src:"https://picsum.photos/300",size:"2rem",button:""},on:{click:t.openUserProfile}}),r("span",{staticClass:"text-truncate mt-2"},[t._v(t._s(t.user.Name))])],1),r("b-nav-item-dropdown",{staticClass:"ml-2",attrs:{right:"","no-caret":""},scopedSlots:t._u([{key:"button-content",fn:function(){return[r("em",[r("b-icon",{attrs:{icon:"grid3x3-gap-fill","font-scale":"1.5"}})],1)]},proxy:!0}],null,!1,481175384)},[r("b-button",{on:{click:t.logout}},[t._v("Đăng xuất")])],1)],1)],1):t._e()},tt=[],et={name:"NavigationPanel",data:function(){return{}},props:["user","jwtToken"],created:function(){},methods:{openUserProfile:function(t){var e=this;this.$router.push({name:"profile",params:{userId:this.user.Id,jwtToken:this.jwtToken}}).catch((function(t){console.log(t),e.$router.go()})),t.stopPropagation()},logout:function(){this.$emit("logout")}}},rt=et,nt=(r("ca16"),Object(c["a"])(rt,W,tt,!1,null,null,null)),it=nt.exports,at=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",{staticClass:"act-form"},[r("v-form",{ref:"form"},[r("v-card-title",[r("span",{staticClass:"text-h5"},[t._v(t._s(t.actFormName))])]),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{label:"Tên hoạt động*",rules:[t.rules.required],required:""},model:{value:t.activity.Name,callback:function(e){t.$set(t.activity,"Name",e)},expression:"activity.Name"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":t.activity.StartTime,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(e){return t.$set(t.activity,"StartTime",e)},"update:return-value":function(e){return t.$set(t.activity,"StartTime",e)}},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,i=e.attrs;return[r("v-text-field",t._g(t._b({attrs:{rules:[t.rules.required],label:"Thời gian bắt đầu*",readonly:""},model:{value:t.activity.StartTime,callback:function(e){t.$set(t.activity,"StartTime",e)},expression:"activity.StartTime"}},"v-text-field",i,!1),n))]}}]),model:{value:t.menu2,callback:function(e){t.menu2=e},expression:"menu2"}},[t.menu2?r("v-time-picker",{attrs:{format:"24hr","full-width":"","use-seconds":""},on:{"click:second":function(e){return t.$refs.menu.save(t.activity.StartTime)}},model:{value:t.activity.StartTime,callback:function(e){t.$set(t.activity,"StartTime",e)},expression:"activity.StartTime"}}):t._e()],1)],1)],1)],1)],1),r("v-card-actions",[1==t.formMode?r("v-dialog",{attrs:{persistent:"","max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,i=e.attrs;return[r("v-btn",t._g(t._b({attrs:{color:"red",dark:""}},"v-btn",i,!1),n),[t._v(" Xóa ")])]}}],null,!1,138986391),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[r("v-card",[r("v-card-title",{staticClass:"text-h5"},[t._v(" Bạn có chắc muốn xóa không? ")]),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" Không ")]),r("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:t.deleteActivity}},[t._v(" Có ")])],1)],1)],1):t._e(),r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.cancelActivity}},[t._v(" Hủy ")]),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.saveActivity}},[t._v(" Lưu ")])],1)],1)],1)},ot=[],st=(r("a9e3"),{name:"ActivityForm",components:{},data:function(){return{actFormName:"Thêm mới hoạt động",rules:{required:function(t){return!!t||"Bắt buộc."}},menu2:!1,dialog:!1,activity:{},add_act_url:"https://localhost:5001/Users/user_id/activities",get_act_url:"https://localhost:5001/Activities/act_id"}},props:{user_id:{type:String,required:!0,default:""},jwt_token:{type:String,required:!0,default:""},marker:{type:Object,required:!0,default:function(){return{}}},formMode:{type:Number,required:!0,default:2},editMarkerId:{type:String,required:!0,default:""}},methods:{cancelActivity:function(){this.activity={},this.$refs.form.reset(),this.$emit("addActivity",!1,2)},saveActivity:function(){var t=this;this.$refs.form.validate(),0===this.formMode?this.marker.LatLon&&(this.activity.Lat=this.marker.LatLon[0],this.activity.Lon=this.marker.LatLon[1],p.a.post(this.add_act_url.replace("user_id",this.user_id),JSON.parse(JSON.stringify(this.activity)),{headers:{Authorization:"Bearer ".concat(this.jwt_token)}}).then((function(e){console.log(e),t.$toast.success("Thêm thành công."),t.cancelActivity()})).catch((function(e){console.log(e),t.$toast.error("Thêm thất bại.")}))):p.a.put(this.get_act_url.replace("act_id",this.editMarkerId),JSON.parse(JSON.stringify(this.activity)),{headers:{Authorization:"Bearer ".concat(this.jwt_token)}}).then((function(e){console.log(e),t.$toast.success("Sửa thành công."),t.cancelActivity()})).catch((function(e){console.log(e),t.$toast.error("Sửa thất bại.")}))},deleteActivity:function(){var t=this;console.log(this.editMarkerId),this.dialog=!1,p.a.delete(this.get_act_url.replace("act_id",this.editMarkerId),{headers:{Authorization:"Bearer ".concat(this.jwt_token)}}).then((function(e){console.log(e),t.$toast.success("Xóa thành công."),t.cancelActivity()})).catch((function(e){console.log(e),t.$toast.error("Xóa thất bại.")}))}},watch:{formMode:{immediate:!0,deep:!0,handler:function(){1===this.formMode?this.actFormName="Sửa hoạt động":this.actFormName="Thêm mới hoạt động"}},marker:{immediate:!0,deep:!0,handler:function(){console.log(this.marker)}},editMarkerId:{immediate:!0,deep:!0,handler:function(){console.log(this.editMarkerId);var t=this;1==this.formMode&&p.a.get(this.get_act_url.replace("act_id",this.editMarkerId),{headers:{Authorization:"Bearer ".concat(this.jwt_token)}}).then((function(e){console.log(e),t.activity=e.data})).catch((function(t){console.log(t)}))}}}}),ct=st,lt=(r("1fd4"),Object(c["a"])(ct,at,ot,!1,null,"4ee563c2",null)),ut=lt.exports,dt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",[r("v-form",{ref:"form"},[r("v-card-title",[r("span",{staticClass:"text-h5"},[t._v(t._s(t.findTripFormName))])]),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-combobox",{attrs:{id:"poi-filter",items:t.categories_for_mutation,label:"Lọc điểm ưa thích",rules:[t.rules.required],clearable:"",dense:"","hide-selected":"","persistent-hint":"","small-chips":"",solo:"",required:""},on:{input:function(e){return t.filterCategory(t.selected_category_for_mutation)}},model:{value:t.selected_category_for_mutation,callback:function(e){t.selected_category_for_mutation=e},expression:"selected_category_for_mutation"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":t.startTime,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(e){t.startTime=e},"update:return-value":function(e){t.startTime=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,i=e.attrs;return[r("v-text-field",t._g(t._b({attrs:{label:"Thời gian xuất phát*",rules:[t.rules.required],readonly:""},model:{value:t.startTime,callback:function(e){t.startTime=e},expression:"startTime"}},"v-text-field",i,!1),n))]}}]),model:{value:t.menu2,callback:function(e){t.menu2=e},expression:"menu2"}},[t.menu2?r("v-time-picker",{attrs:{"full-width":"",format:"24hr","use-seconds":""},on:{"click:second":function(e){return t.$refs.menu.save(t.startTime)}},model:{value:t.startTime,callback:function(e){t.startTime=e},expression:"startTime"}}):t._e()],1)],1),r("v-col",{attrs:{cols:"12"}},[r("v-menu",{ref:"menu_2",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":t.arrivalTime,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(e){t.arrivalTime=e},"update:return-value":function(e){t.arrivalTime=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,i=e.attrs;return[r("v-text-field",t._g(t._b({attrs:{label:"Thời gian đến*",rules:[t.rules.required],readonly:""},model:{value:t.arrivalTime,callback:function(e){t.arrivalTime=e},expression:"arrivalTime"}},"v-text-field",i,!1),n))]}}]),model:{value:t.menu2_2,callback:function(e){t.menu2_2=e},expression:"menu2_2"}},[t.menu2_2?r("v-time-picker",{attrs:{"full-width":"",format:"24hr","use-seconds":""},on:{"click:second":function(e){return t.$refs.menu_2.save(t.arrivalTime)}},model:{value:t.arrivalTime,callback:function(e){t.arrivalTime=e},expression:"arrivalTime"}}):t._e()],1)],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.cancelFindTrip}},[t._v(" Hủy ")]),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.confirmFindTrip}},[t._v(" Tìm ")])],1)],1)],1)},ht=[],mt={name:"FindTripForm",props:{user_id:{type:String,required:!0,default:""},jwt_token:{type:String,required:!0,default:""},selected_category:{type:String,required:!1,default:null},categories:{type:Array,required:!1,default:function(){return[]}},startLat:Number,startLon:Number,poiId:String},data:function(){return{findTripFormName:"Tìm chuyến đi chung",menu2:!1,menu2_2:!1,dialog:!1,carRequest:{},rules:{required:function(t){return!!t||"Bắt buộc."}},selected_category_for_mutation:null,categories_for_mutation:[],poi:null,poi_name:"",startTime:(new Date).toTimeString().substring(0,8),arrivalTime:"",get_poi_url:"https://localhost:5001/POIs/poi_id",matching_url:"https://localhost:5001/Users/user_id/matching"}},methods:{cancelFindTrip:function(){this.$refs.form.reset(),this.$emit("findTrip",!1)},confirmFindTrip:function(){var t=this;this.$refs.form.validate(),this.startTime&&(this.buildCarRequest(),console.log(this.carRequest),p.a.post(this.matching_url.replace("user_id",this.user_id),JSON.parse(JSON.stringify(this.carRequest)),{headers:{Authorization:"Bearer ".concat(this.jwt_token)}}).then((function(e){console.log(e.data),t.$emit("notifyMatchedTrips",e.data),t.cancelFindTrip()})).catch((function(t){console.log(t)})))},buildCarRequest:function(){this.carRequest={UserId:this.user_id,StartLat:this.startLat,StartLon:this.startLon,StartTime:this.startTime,ArrivalTime:this.arrivalTime,Category:this.selected_category,Timestamp:Date()}},filterCategory:function(t){this.$emit("filterCategory",t)}},watch:{selected_category:{immediate:!0,deep:!0,handler:function(){this.selected_category_for_mutation=this.selected_category}},categories:{immediate:!0,deep:!0,handler:function(){this.categories_for_mutation=this.categories}},poiId:{deep:!0,handler:function(){var t=this;console.log(this.poiId),p.a.get(this.get_poi_url.replace("poi_id",this.poiId)).then((function(e){t.poi=e.data,t.poi_name=t.poi.Name,console.log(t.poi)})).catch((function(t){console.log(t)}))}}}},ft=mt,pt=Object(c["a"])(ft,dt,ht,!1,null,"cc5a8eae",null),gt=pt.exports,vt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{id:"matched-trips-dialog-container"}},[t.matchedTrips_to_mutate?r("v-row",{attrs:{dense:""}},t._l(t.matchedTrips_to_mutate,(function(e,n){return r("v-col",{key:e.Id,staticClass:"matched-trip-row",attrs:{cols:"12"}},[r("v-card",{attrs:{color:"blue",dark:""}},[r("v-card-title",{staticClass:"text-h5",domProps:{textContent:t._s("Chuyến #"+(n+1))}}),r("v-card-text",[r("div",[r("b",[t._v("Mã chuyến xe:")]),t._v(" "),r("i",[t._v(t._s(e.Id))])]),r("div",[r("b",[t._v("Khởi hành:")]),t._v(" "),r("i",[t._v(t._s(e.StartTime))])]),r("div",[r("b",[t._v("Đến lúc:")]),t._v(" "),r("i",[t._v(t._s(e.ArrivalTime))])]),r("div",[r("b",[t._v("Địa điểm:")]),t._v(" "),r("i",[t._v(t._s(e.POI))])])]),r("v-card-actions",[r("v-btn",{staticClass:"ml-2 mt-5",attrs:{outlined:"",rounded:"",small:""},on:{click:function(e){return t.rejectTrip(n)}}},[t._v(" Từ chối ")]),r("v-spacer"),r("v-btn",{staticClass:"ml-2 mt-5",attrs:{outlined:"",rounded:"",small:""},on:{click:function(e){return t.acceptTrip(t.matchedTrips_to_mutate.Id)}}},[t._v(" Chấp nhận ")])],1)],1)],1)})),1):t._e()],1)},_t=[],bt={name:"MatchedTripsDialog",props:{matchedTrips:{type:Array,required:!0,default:function(){return[]}},jwt_token:{type:String,required:!0,default:""}},data:function(){return{matchedTrips_to_mutate:null,matchedTripsUrl:"https://localhost:5001/MatchedTrip/matched_trip_id"}},methods:{rejectTrip:function(t){this.matchedTrips_to_mutate.splice(t,1)},acceptTrip:function(){this.matchedTrips_to_mutate=null}},watch:{matchedTrips:{immediate:!0,deep:!0,handler:function(){this.matchedTrips_to_mutate=this.matchedTrips}}}},kt=bt,wt=(r("ad0f"),Object(c["a"])(kt,vt,_t,!1,null,"7f0b1e68",null)),yt=wt.exports,Tt={name:"Home",components:{NavigationPanel:it,ActivityForm:ut,FindTripForm:gt,MatchedTripsDialog:yt,ChatDialog:Q},data:function(){return{getUserUrl:"https://localhost:5001/Users/",add_getall_actsUrl:"https://localhost:5001/Users/user_id/activities",jwtToken:"",user:null,userId:null,activities:null,showActivities:!0,curr_loc_options:{enableHighAccuracy:!0,timeout:5e3,maximumAge:0},curr_loc:null,url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors',zoom:14,center:[0,0],markers:[],polyline:{latlons:[],color:"SlateBlue"},add_act_dialog:!1,find_trip_dialog:!1,selected_category:null,categories:[],poiMarkers:[],all_categories_url:"https://localhost:5001/POIs/Categories",filter_category_url:"https://localhost:5001/POIs/Filter?category=cate_str",formMode:2,new_act_idx:0,new_marker:{},editMarkerId:"",destPoiId:"",chosenPoi:null,grid:[],showGrid:!1,grid_get_url:"https://localhost:5001/POIs/Grid",matchedTrips:null}},props:{},created:function(){this.jwtToken=this.$route.params.authToken,void 0===this.jwtToken&&(this.jwtToken=this.$cookies.get("omachi-auth-token"),null===this.jwtToken&&this.$router.push("login"))},mounted:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getUser();case 2:return e.next=4,t.getCurrLoc();case 4:return e.next=6,t.getGrid();case 6:return e.next=8,t.getCategories();case 8:return e.next=10,t.drawActivitiesRoute();case 10:case"end":return e.stop()}}),e)})))()},methods:{logout:function(){this.jwtToken=this.$cookies.get("omachi-auth-token"),null!==this.jwtToken&&this.$cookies.remove("omachi-auth-token"),this.userId=this.$cookies.get("omachi-user-id"),null!==this.userId&&this.$cookies.remove("omachi-user-id"),this.$nextTick((function(){this.$router.push("login")}))},getUser:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.userId=t.$cookies.get("omachi-user-id"),r=t,null===t.userId){e.next=5;break}return e.next=5,p.a.get(t.getUserUrl+t.userId,{headers:{Authorization:"Bearer ".concat(t.jwtToken)}}).then((function(e){e.data.Name?t.user=e.data:t.$router.push({name:"profile",params:{userId:r.userId,jwtToken:r.jwtToken}})})).catch((function(t){console.log(t)}));case 5:case"end":return e.stop()}}),e)})))()},curr_loc_success:function(t){this.curr_loc=t.coords,this.center=[this.curr_loc.latitude,this.curr_loc.longitude],console.log("Your current position is:",this.curr_loc),console.log("Latitude : ".concat(this.curr_loc.latitude)),console.log("Longitude: ".concat(this.curr_loc.longitude)),console.log("More or less ".concat(this.curr_loc.accuracy," meters.")),this.$toast.success("Vị trí của bạn là hình tròn màu đỏ, sai lệch ".concat(this.curr_loc.accuracy," mét."))},curr_loc_error:function(t){console.warn("ERROR(".concat(t.code,"): ").concat(t.message)),this.$toast.error("Không thể tìm vị trí của bạn.")},getCurrLoc:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.userId&&t.jwtToken&&navigator.geolocation.getCurrentPosition(t.curr_loc_success,t.curr_loc_error,t.curr_loc_options);case 1:case"end":return e.stop()}}),e)})))()},getGrid:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:p.a.get(t.grid_get_url).then((function(e){t.grid=e.data})).catch((function(t){console.log(t)}));case 1:case"end":return e.stop()}}),e)})))()},getActivities:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.userId){e.next=4;break}return console.log("getting activities..."),e.next=4,p.a.get(t.add_getall_actsUrl.replace("user_id",t.userId),{headers:{Authorization:"Bearer ".concat(t.jwtToken)}}).then((function(e){t.activities=e.data})).catch((function(e){console.log(e),t.$toast.error("Không thể lấy dữ liệu các hoạt động của bạn.")}));case 4:case"end":return e.stop()}}),e)})))()},getCategories:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("getting categories..."),e.next=3,p.a.get(t.all_categories_url).then((function(e){t.categories=e.data})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()},drawActivitiesRoute:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("drawing route..."),t.markers=[],t.polyline.latlons=[],e.next=5,t.getActivities();case 5:if(t.activities&&t.activities.length>=1)for(r in console.log("drawing..."),t.activities)n=t.activities[r],t.markers.push({Index:r,Id:n.Id,LatLon:[n.Lat,n.Lon],Name:n.Name,StartTime:n.StartTime}),t.polyline.latlons.push([n.Lat,n.Lon]);case 6:case"end":return e.stop()}}),e)})))()},addActivity:function(t,e){var r=this;return Object($["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r.new_act_idx&&(console.log("splicing..."),r.markers.splice(r.new_act_idx,1)),r.add_act_dialog=t,r.formMode=e,2!==r.formMode){n.next=6;break}return n.next=6,r.drawActivitiesRoute();case 6:case"end":return n.stop()}}),n)})))()},addMarker:function(t){if(this.add_act_dialog&&0===this.formMode){var e=this.activities.length;this.new_act_idx=this.markers.length,this.new_act_idx-e===1&&(this.markers.splice(this.new_act_idx-1,1),this.new_act_idx=this.new_act_idx-1),this.new_marker={Index:this.new_act_idx,LatLon:[t.latlng.lat,t.latlng.lng]},this.markers.push(this.new_marker)}},editMarker:function(t,e){2===this.formMode&&(this.formMode=1,this.editMarkerId=e,this.add_act_dialog=t)},filterCategory:function(t){var e=this;this.selected_category=t,this.selected_category?(console.log("chosen: ",this.selected_category),p.a.get(this.filter_category_url.replace("cate_str",this.selected_category)).then((function(t){e.poiMarkers=t.data,console.log(e.poiMarkers)})).catch((function(t){console.log(t)}))):this.poiMarkers=[]},findTrip:function(t){this.find_trip_dialog=t,t||(this.chosenPoi=null)},notifyMatchedTrips:function(t){this.matchedTrips=t}},watch:{}},xt=Tt,Ct=(r("098c"),Object(c["a"])(xt,I,j,!1,null,"45755e67",null)),It=Ct.exports,jt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"profile-page"}},[r("h1",{attrs:{id:"profile-title"}},[t._v("Thông tin cá nhân")]),r("b-form",{staticClass:"mt-5 form",on:{submit:t.onSubmit}},[r("b-avatar",{staticClass:"avatar",attrs:{src:"https://picsum.photos/300",size:"10rem"}}),r("b-form-group",[r("b-form-input",{attrs:{id:"input-name",placeholder:"Tên",required:""},model:{value:t.form.Name,callback:function(e){t.$set(t.form,"Name",e)},expression:"form.Name"}}),r("b-form-input",{staticClass:"email",attrs:{id:"input-email",placeholder:"Email",readonly:""},model:{value:t.form.Email,callback:function(e){t.$set(t.form,"Email",e)},expression:"form.Email"}})],1),r("b-form-group",[r("v-checkbox",{attrs:{label:"Tôi là tài xế"},model:{value:t.isDriver,callback:function(e){t.isDriver=e},expression:"isDriver"}})],1),t.isDriver?r("b-form-group",[r("b-form-input",{attrs:{id:"input-car",placeholder:"Tên xe",required:""},model:{value:t.car.Name,callback:function(e){t.$set(t.car,"Name",e)},expression:"car.Name"}}),r("b-form-input",{attrs:{id:"input-car",placeholder:"Biển số",required:""},model:{value:t.car.Number,callback:function(e){t.$set(t.car,"Number",e)},expression:"car.Number"}}),r("b-form-input",{attrs:{id:"input-car",placeholder:"Màu sắc",required:""},model:{value:t.car.Color,callback:function(e){t.$set(t.car,"Color",e)},expression:"car.Color"}})],1):t._e(),r("b-button",{attrs:{type:"submit",variant:"primary",block:""}},[t._v("Lưu")])],1)],1)},$t=[],Mt={data:function(){return{profileUrl:"https://localhost:5001/Users/",getCarUrl:"https://localhost:5001/Users/userId/car",form:{},jwtToken:null,myId:null,isDriver:!1,car:{}}},created:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.myId=t.$route.params.userId,t.jwtToken=t.$route.params.jwtToken,e.next=4,t.getUser();case 4:return e.next=6,t.checkCar();case 6:case"end":return e.stop()}}),e)})))()},methods:{getUser:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null===t.userId){e.next=3;break}return e.next=3,p.a.get(t.profileUrl+t.myId,{headers:{Authorization:"Bearer ".concat(t.jwtToken)}}).then((function(e){t.form=e.data})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()},checkCar:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p.a.get(t.getCarUrl.replace("userId",t.myId)+"/own",{headers:{Authorization:"Bearer ".concat(t.jwtToken)}}).then((function(e){console.log(e),!1===e.data?t.isDriver=!1:(t.isDriver=!0,t.car=e.data)})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},onSubmit:function(t){var e=this;return Object($["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.preventDefault(),!e.isDriver){r.next=5;break}return console.log(e.car),r.next=5,p.a.patch(e.getCarUrl.replace("userId",e.myId),JSON.parse(JSON.stringify(e.car)),{headers:{Authorization:"Bearer ".concat(e.jwtToken)}}).then((function(t){console.log(t)})).catch((function(t){console.log(t)}));case 5:return e.form.Timestamp=new Date,r.next=8,p.a.patch(e.profileUrl+e.myId,JSON.parse(JSON.stringify(e.form)),{headers:{Authorization:"Bearer ".concat(e.jwtToken)}}).then((function(){e.$toast.success("Cập nhật thành công."),e.$router.push({name:"home",params:{authToken:e.jwtToken,userId:e.myId}})})).catch((function(t){console.log(t.response)}));case 8:case"end":return r.stop()}}),r)})))()}}},Ot=Mt,St=(r("6d6f"),Object(c["a"])(Ot,jt,$t,!1,null,"c82e7d8a",null)),Lt=St.exports;n["default"].use(d["a"]);var Nt=[{path:"/login",name:"login",component:b},{path:"/register",name:"register",component:C},{path:"/home",name:"home",component:It},{path:"/user/:userId",name:"profile",component:Lt}],Ut=new d["a"]({mode:"history",routes:Nt}),At=Ut,Rt=r("ce5b"),Pt=r.n(Rt);r("bf40"),r("5363");n["default"].use(Pt.a);var qt=new Pt.a,zt=(r("d1e78"),r("5f5b")),Et=r("b1e0"),Bt=(r("f9e3"),r("2dd8"),r("2b27")),Dt=r.n(Bt),Ft=r("6c42"),Jt=(r("da96"),r("2699")),Gt=r("a40a"),Ht=r("4e2b"),Vt=r("31dc"),Zt=r("635f"),Kt=r("2253"),Xt=r("ea97"),Yt=(r("6cc5"),r("e11e")),Qt=(r("d3b7"),r("bad4")),Wt=r("33e1"),te={install:function(){var t=(new Qt["a"]).withUrl("https://localhost:5001/chatsocket").configureLogging(Wt["a"].Information).build(),e=new n["default"];n["default"].prototype.$chatHub=e,t.on("SendMessage",(function(t,r){e.$emit("message-received",{userId:t,message:r})}));var r=null;function i(){return r=t.start().catch((function(t){return console.error("Failed to connect with hub",t),new Promise((function(t,e){return setTimeout((function(){return i().then(t).catch(e)}),5e3)}))})),r}t.onclose((function(){return i()})),i()}};n["default"].config.productionTip=!1,n["default"].use(zt["a"]),n["default"].use(Et["a"]),n["default"].use(Dt.a),n["default"].use(d["a"]);var ee={position:"bottom-left",closeOnClick:!1,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:2,showCloseButtonOnHover:!0,closeButton:"button",transition:"Vue-Toastification__fade"};n["default"].use(Ft["a"],ee),n["default"].component("l-map",Jt["a"]),n["default"].component("l-tile-layer",Gt["a"]),n["default"].component("l-marker",Ht["a"]),n["default"].component("l-tooltip",Vt["a"]),n["default"].component("l-polyline",Zt["a"]),n["default"].component("l-control",Kt["a"]),n["default"].component("l-circle-marker",Xt["a"]),delete Yt["Icon"].Default.prototype._getIconUrl,Yt["Icon"].Default.mergeOptions({iconRetinaUrl:r("584d"),iconUrl:r("6397"),shadowUrl:r("e2b9")}),n["default"].use(te),new n["default"]({router:At,vuetify:qt,render:function(t){return t(u)}}).$mount("#app")},"624f":function(t,e,r){},"670d":function(t,e,r){"use strict";r("b2fd")},"6b1f":function(t,e,r){},"6d6f":function(t,e,r){"use strict";r("624f")},"85ec":function(t,e,r){},"9b10":function(t,e,r){"use strict";r("d9b2")},"9df0":function(t,e,r){},ad0f:function(t,e,r){"use strict";r("d2fa")},b2fd:function(t,e,r){},ca16:function(t,e,r){"use strict";r("0a45")},d2fa:function(t,e,r){},d9b2:function(t,e,r){},dd97:function(t,e,r){},eea4:function(t,e,r){},f723:function(t,e,r){}});
//# sourceMappingURL=app.4570b41d.js.map